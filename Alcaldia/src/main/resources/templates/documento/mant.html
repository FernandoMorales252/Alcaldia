<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/_MainLayout}">
<head>
    <title layout:fragment="title" th:text="'Documento - ' + ${action}">Documento</title>
</head>
<body>
<section layout:fragment="content">
    <h2 th:text="${action == 'create' ? 'Crear Documento' : 
                  action == 'edit' ? 'Editar Documento' : 
                  action == 'view' ? 'Ver Documento' : 
                  action == 'delete' ? 'Eliminar Documento' : 'Documento'}"></h2>

    <form th:action="@{${action == 'create' ? '/documentos/create' : 
                      action == 'edit' ? '/documentos/edit' : 
                      action == 'delete' ? '/documentos/delete' : '#'}}" 
          th:object="${documentoArchivo}" method="post">

        <input type="hidden" th:if="${documentoArchivo.idDocumento != null}" th:field="*{idDocumento}" />

        <!-- Número de Documento -->
        <div class="mb-3">
            <label for="numeroDocumento" class="form-label">Número de documento</label>
            <input type="text" th:field="*{numeroDocumento}" id="numeroDocumento" class="form-control"
                   th:attr="readonly=${action=='view' or action=='delete'}" />
        </div>

        <!-- Nombre Persona -->
        <div class="mb-3">
            <label for="nombrePersona" class="form-label">Propietario</label>
            <input type="text" th:field="*{nombrePersona}" id="nombrePersona" class="form-control"
                   th:attr="readonly=${action=='view' or action=='delete'}" />
        </div>

        <!-- Detalles -->
        <div class="mb-3">
            <label for="detalles" class="form-label">Detalles</label>
            <textarea th:field="*{detalles}" id="detalles" class="form-control"
                      th:attr="readonly=${action=='view' or action=='delete'}"></textarea>
        </div>

        <!-- Estado -->
        <div class="mb-3">
            <label for="estado" class="form-label">Estado</label>
            <select th:field="*{estado}" id="estado" class="form-select"
                    th:disabled="${action=='view' or action=='delete'}">
                <option value="1" th:selected="${documentoArchivo.estado == 1}">Activo</option>
                <option value="0" th:selected="${documentoArchivo.estado == 0}">Inactivo</option>
            </select>
        </div>

        <!-- Fecha de Emisión -->
        <div class="mb-3">
            <label for="fechaEmision" class="form-label">Fecha de emisión</label>
            <input type="date" th:field="*{fechaEmision}" id="fechaEmision" class="form-control"
                   th:attr="readonly=${action=='view' or action=='delete'}" />
        </div>

        <!-- Municipio -->
        <div class="mb-3">
            <label for="municipio" class="form-label">Municipio</label>
            <select th:field="*{municipio}" id="municipio" class="form-select"
                    th:disabled="${action=='view' or action=='delete'}">
                <option value="">Seleccione municipio</option>
                <option th:each="mun : ${municipios}" 
                        th:value="${mun}" 
                        th:text="${mun.nombreMunicipio}">
                </option>
            </select>
        </div>

        <!-- Tipo de Documento -->
        <div class="mb-3">
            <label for="tipoDocumento" class="form-label">Tipo de documento</label>
            <select th:field="*{tipoDocumento}" id="tipoDocumento" class="form-select"
                    th:disabled="${action=='view' or action=='delete'}">
                <option value="">Seleccione tipo</option>
                <option th:each="tipo : ${tipos_documentos}" 
                        th:value="${tipo}" 
                        th:text="${tipo.nombre_tipo}">
                </option>
            </select>
        </div>

        <!-- Botones -->
        <div class="mb-3" th:if="${action != 'view'}">
            <button type="submit" class="btn btn-primary" th:text="${action == 'create' ? 'Crear' : action == 'edit' ? 'Guardar cambios' : action == 'delete' ? 'Eliminar' : 'Guardar'}"></button>
            <a th:href="@{/documentos}" class="btn btn-secondary">Cancelar</a>
        </div>
        <div class="mb-3" th:if="${action == 'view'}">
            <a th:href="@{/documentos}" class="btn btn-secondary">Volver</a>
        </div>
    </form>
</section>
</body>
</html>
